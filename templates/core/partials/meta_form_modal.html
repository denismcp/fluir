{% load crispy_forms_tags %}

<div class="modal-header bg-gradient-success text-white border-0">
    <h5 class="modal-title font-weight-bold">
        <i class="fas fa-bullseye mr-2"></i>
        {% if form.instance.pk %}Ajustar Objetivo{% else %}Definir Objetivo de Venda{% endif %}
    </h5>
    <button type="button" class="close text-white" data-dismiss="modal">&times;</button>
</div>

<form hx-post="{{ request.path }}" hx-target="#htmx-modal-content" class="bg-light">
    {% csrf_token %}
    <div class="modal-body p-4">
        <div class="card shadow-sm border-0 rounded-15 mb-0">
            <div class="card-body p-4">
                
                <div class="form-group mb-4">
                    <label class="small font-weight-bold text-uppercase text-primary">Vendedor / Escopo</label>
                    {{ form.vendedor|as_crispy_field }}
                    <div class="alert alert-light border-0 small mt-n2 mb-0 py-1 px-0">
                        <i class="fas fa-info-circle mr-1 text-info"></i> Deixe em branco para Meta Global da Empresa.
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Mês de Referência</label>
                        {{ form.mes|as_crispy_field }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Ano</label>
                        {{ form.ano|as_crispy_field }}
                    </div>
                </div>

                <hr class="my-4">

                <div class="form-group mb-0">
                    <label class="small font-weight-bold text-uppercase text-success">Valor Objetivo (Alvo Financeiro)</label>
                    <div class="input-group input-group-lg shadow-sm rounded-8 overflow-hidden">
                        <div class="input-group-prepend">
                            <span class="input-group-text bg-white border-right-0 text-success font-weight-bold">R$</span>
                        </div>
                        <input type="number" step="0.01" name="valor_objetivo" 
                               value="{{ form.valor_objetivo.value|default_if_none:'0.00' }}"
                               class="form-control border-left-0 font-weight-bold text-dark" 
                               style="font-size: 1.4rem;">
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal-footer border-0 bg-white shadow-lg">
        <button type="button" class="btn btn-link text-muted font-weight-bold" data-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-success px-5 shadow-sm rounded-pill font-weight-bold" style="background: #2dce89; border: none;">
            <i class="fas fa-check-circle mr-2"></i>Salvar Meta Comercial
        </button>
    </div>
</form>

<style>
    .rounded-15 { border-radius: 15px !important; }
    .rounded-8 { border-radius: 8px !important; }
    .bg-gradient-success { background: linear-gradient(135deg, #2dce89 0%, #2dcecc 100%) !important; }
    
    /* Remove labels duplicadas do Crispy já que usamos labels customizadas */
    .asteriskField, label[for^="id_"] { display: none; }
    .form-group label.font-weight-bold { display: block !important; margin-bottom: 0.5rem; }
    
    .form-control-lg { height: calc(1.5 em + 1rem + 2px); }
    .input-group-text { border: 1px solid #e9ecef; }
</style>